---
title: "AEM stuurt de gebruiker terug naar http wanneer deze wordt benaderd via SSL/TLS beëindigde Load Balancer | AEM"
description: Beschrijving
solution: Experience Manager
product: Experience Manager
applies-to: "Experience Manager"
keywords: "KCS"
resolution: Resolution
internal-notes: "Helpx Link: https://helpx.adobe.com/experience-manager/kb/AEM-redirecting-back-to-http-on-accessed-via-SSL-terminated-Load-Balancer.html"
bug: false
article-created-by: Emily Geary
article-created-date: "4/12/2021 6:21:34 PM"
article-published-by: Emily Geary
article-published-date: "4/12/2021 6:26:15 PM"
version-number: 1
article-number: KA-16936
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=684ec8e8-bb9b-eb11-b1ac-000d3a3680d8"
exl-id: 52e50c09-67f2-46a2-90a7-df769d76a0dd
source-git-commit: 0c3e421beca46d9fe1952b1f98538a50697216a0
workflow-type: tm+mt
source-wordcount: '341'
ht-degree: 0%

---

# AEM stuurt de gebruiker terug naar http wanneer deze wordt benaderd via SSL/TLS beëindigde Load Balancer | AEM

## Beschrijving


Wanneer het toegang tot van AEM door SSL geëindigde de Balancer van de Lading (of SSL geëindigde CDN), dan AEM terug van https aan http.

SSL-beëindiging bij het taakverdelingsmechanisme betekent dat de SSL-certificaten in het taakverdelingsmechanisme zijn geïnstalleerd. De eindgebruiker heeft via `https://`en de Server en AEM Dispatcher/Web worden op de achterzijde benaderd met `http://`.



<b>Oorzaak</b>

Verschillende taakverdelingsmechanisme verzendt verschillende headers om aan de back-end systemen te melden dat SSL upstream wordt beëindigd. Bijvoorbeeld: [Amazon ELB gebruikt de header &quot;X-Forwarded-Proto: https&quot;](https://docs.aws.amazon.com/elasticloadbalancing/latest/classic/x-forwarded-headers.html#x-forwarded-proto).


## Resolutie


U kunt als volgt het probleem verhelpen:

<b>I. Dispatcher bijwerken `/clientheaders` configuratie</b>

Raadpleeg de documentatie bij het taakverdelingsmechanisme om te weten te komen welke header wordt ingesteld om downstreamsystemen op de hoogte te brengen van het feit dat het SSL heeft beëindigd. Voor eenvoud gaan we er in deze stappen van uit dat de juiste HTTP-header *`X-Forwarded-Proto: https`*

1. Meld u aan bij de verzenderserver.
2. De verzendingskwekerij openen `.any` configuratie.
3. Voeg de koptekst toe aan de `/clientheaders` sectie.


Als u een dispatcher gebruikt zonder taakverdelingsmechanisme of als uw taakverdelingsmechanisme of proxy er niet in slaagt de `X-Forwarded-Proto` , kunt u deze op het niveau van de webserver of de verzender instellen. Als u [!DNL Apache HTTP Server]Werk vervolgens uw HTTPS VirtualHost bij met deze aanwijzing:


| 1 | `RequestHeader ` `set` `X-Forwarded-Proto ` `"https"` |
| --- | --- |


<b>II. Werk de configuraties van de Kopbal bij:</b>

1. Ga naar *http://host:port*/system/console/configMgr/org.apache.felix.http.sslfilter.SslFilter, en login als beheerder.
2. SSL voorwaartse koptekst instellen op `X-Forwarded-Proto`.
3. Stel SSL-voorwaartse waarde in op https.
4. Klik op Opslaan.


Opmerking:

Er is geen norm voor omgekeerde volmachtskopballen die het achtereind vertellen welk protocol wordt gebruikt. Er zijn echter een aantal zaken die bekend zijn:

- Amazon ELB ([!DNL Elastic Load Balancer]) gebruikt de `X-Forwarded-Proto: https` header.
- [!DNL Amazon Cloudfront] CDN gebruikt `X-Cloudfront-Proto: https` header.


<b>III. Werk de Configuratie van Jetty OSGi (AEM 6.3 en recentere versies) bij</b>

Bij AEM 6.3 en latere versies is een aanvullende configuratie vereist:

- Meld u aan bij http://aem-host:port/system/console/configMgr/org.apache.felix.http.
- De instelling inschakelen <b>Proxy/Load Balancer Connection inschakelen</b>en sla deze op.
