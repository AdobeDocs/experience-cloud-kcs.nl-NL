---
title: "De workflow herhaalt honderden keren bij het uploaden van middelen | AEM"
description: "Leer hoe u het probleem kunt oplossen waarbij de workflows voor elke MP4 enkele uren na afloop van een workflowinstantie honderden keren herhalen."
solution: Experience Manager
product: Experience Manager
applies-to: "Experience Manager"
keywords: "KCS, Workflow, repeats, asset uploading, AEM 6.1, Adobe Experience Manager 6.1, Troubleshooting"
resolution: Resolution
internal-notes: null
bug: false
article-created-by: Jim Menn
article-created-date: "6/14/2024 9:14:57 PM"
article-published-by: Jim Menn
article-published-date: "6/14/2024 9:27:06 PM"
version-number: 7
article-number: KA-11685
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=1e7a8d20-932a-ef11-840a-000d3a5a67ba"
source-git-commit: a6ba78fc199368c2cc9af546bdb85b05ee540f93
workflow-type: tm+mt
source-wordcount: '287'
ht-degree: 0%

---

# De workflow herhaalt honderden keren bij het uploaden van middelen | AEM


U kunt het volgende toevoegen om dit probleem op te lossen: `delete` machtigingen voor elementmappen voor de gebruiker, of u kunt de eigenschappen wijzigen van
`/libs/dam/gui/content/assets/jcr:content/body/assetscontent/header/items/default/items/fileupload`.

## Beschrijving {#description}


<b>Probleem </b>
MP4-bestanden uploaden in <b>Activa</b> console door te slepen en neer te zetten, werden de workflows voor elke MP4-bestanden honderden keren herhaald gedurende uren.
Bijvoorbeeld de workflows van <b>DAM Update-element</b> voor één mp4 890 keer herhaald. Elke 5 seconden nadat een werkstroominstantie eindigde en een nieuwe werkstroominstantie begon.

Deze uitgave genereerde foutberichten zoals hieronder:


```
15.01.2018 10:40:06.628 *ERROR* [ XX.XXX.XX.XX [ 1586753090032]  POST /content/dam/path/to/file.createasset.html HTTP/1.1]  com.day.XX.XXX.core.impl.servlet.CreateAssetServlet Error while creating new asset: Unable to commit changes to session.

org.apache.sling.api.resource.PersistenceException: Unable to commit changes to session.

...

Caused by: javax.jcr.AccessDeniedException: OakAccess0000: Access denied

...

Caused by: org.apache.jackrabbit.oak.api.CommitFailedException: OakAccess0000: Access denied

at org.apache.jackrabbit.oak.security.authorization.permission.PermissionValidator.checkPermissions(PermissionValidator.java:212)

at org.apache.jackrabbit.oak.security.authorization.permission.PermissionValidator.childNodeDeleted(PermissionValidator.java:168)
```


<br>Een ander gemeld symptoom is dat tijdens het uploaden van het element rood op het scherm wordt knipperd.

<b>Omgeving</b>
<br>Adobe Experience Manager 6.1 SP1 (AEM 6.1 SP1)

<b>Oorzaak </b>
<br>Wanneer de gebruiker probeert het element te uploaden, heeft deze niet de `delete` toestemming voor de map.

<br>Als de gebruiker een groot bestand (5 MB+) uploadt, wordt het bestand geüpload dat wordt opgedeeld in meerdere delen die onder het knooppunt Elementen zijn opgeslagen.
<br>Wanneer alle delen zijn geüpload, AEM worden de delen als het oorspronkelijke bestand geconsolideerd, wordt de DAM-workflow voor het bijwerken van middelen gestart en worden de delen gewist.
<br>Maar als de gebruiker niet de `delete` toestemming, het wissen van de blokken mislukt en als gevolg daarvan wordt het uploaden van het bestand opnieuw gestart.
<br> 
<b>Opgegeven berichten</b>



```
ERROR * POST /content/XXX/*.createasset.html HTTP/1.1]  com.XXX.XX.XXX.core.impl.servlet.CreateAssetServlet Error while creating new asset: Unable to commit changes to session.

org.apache.sling.api.resource.PersistenceException: Unable to commit changes to session.

Caused by: javax.jcr.AccessDeniedException: OakAccess0000: Access denied
```



## Resolutie {#resolution}


<b>Resoluties</b>
Er zijn twee manieren om dit probleem op te lossen:<b> </b>

<b>Methode 1 voor resolutie</b>
Voeg de `delete` toestemming voor elementmappen voor de gebruiker.

<b>Methode 2 voor resolutie</b>
Wijzig de eigenschappen van:
`/libs/dam/gui/content/assets/jcr:content/body/assetscontent/header/items/default/items/fileupload`

Als u de minimale bytes van een segmentupload wilt verhogen, verhoogt u `chunkUploadMinFileSize`.
Als u het uploaden van een segment wilt uitschakelen, stelt u false in op `chunkUploadSupported`.
