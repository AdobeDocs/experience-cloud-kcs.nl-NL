---
title: "client_geheime in de configuratie IMS wordt ongezet"
description: "Leer hoe te om de kwestie op te lossen waar client_geheime in de configuratie IMS ongeplaatst wordt. Sla de cryptosleutels op in de bestandsopslag van de bundel."
solution: Experience Manager
product: Experience Manager
applies-to: "Experience Manager"
keywords: "KCS, crypto, key, bundle, storage, jcr, hmac, master"
resolution: Resolution
internal-notes: null
bug: false
article-created-by: Dharmender Singh
article-created-date: "4/4/2024 9:42:27 AM"
article-published-by: Zita Rodricks
article-published-date: "5/14/2024 4:26:17 PM"
version-number: 2
article-number: KA-23909
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=e9786ba5-67f2-ee11-904b-6045bd04ed02"
source-git-commit: f121146cf25aa2ecd9e5a091bd7af23f1da23c51
workflow-type: tm+mt
source-wordcount: '503'
ht-degree: 0%

---

# client_geheime in de configuratie IMS wordt ongezet


Dit artikel bevat een oplossing voor het probleem waarbij de IMS-configuratie mislukt na een AEM opnieuw opstarten. De gezondheidscontrole verbonden aan configuraties IMS ontbreekt constant, die op een onvermogen wijzen om voor authentiek te verklaren gebruikend gevormde client_SECUNCTIE. Sla de cryptosleutels op in de bestandsopslag van de bundel.

## Beschrijving {#description}


### Omgeving:

Experience Manager

### Probleem/symptomen

client_geheime in de configuratie IMS wordt ongezet.
Na het upgraden van AEM van oudere versies (bijvoorbeeld 6.2 of lager) naar nieuwere versies (6.3 of hoger), wijzigt de methode voor het opslaan van cryptosleutels van JCR-opslag naar bestandssysteemopslag. Deze wijziging vereist handmatige interventie om ervoor te zorgen dat de hoofdtoetsen en hoofdtoetsen op de juiste wijze worden verplaatst, zodat AEM na het opnieuw opstarten correct werken. Als u dit niet doet, kunnen er verificatieproblemen optreden met services zoals IMS, omdat de sleutels die worden gebruikt voor het versleutelen en ontsleutelen van vertrouwelijke informatie niet op de verwachte locatie worden gevonden.

De volgende fout is zichtbaar:


```
{"error":"invalid_client","error_description":"invalid client_secret parameter"}
```



## Resolutie {#resolution}


Voer de volgende stappen uit om dit probleem op te lossen en ervoor te zorgen dat IMS-configuraties bij AEM opnieuw opstarten stabiel blijven:

1. Ga naar crxde en navigeer naar /etc/key. Binnen die knoop, zou er een hoofdbezit en een beeldbezit moeten zijn. Download deze bestanden.
2. Download de eigenschap door op de waarden voor die eigenschappen te klikken.
3. Ga naar ` <hostname>/system/console/bundles`en zoek naar &quot;Crypto&quot;
4. Noteer de bundle-id voor de bundel met het label &quot;Adobe Granite Crypto Bundle Key Provider com.adobe.granite.crypto.file.
5. Noteer de bundle-id voor de bundel met het label &quot;Adobe Granite Crypto Support com.adobe.granite.crypto&quot;.
6. Stop AEM.
7. Navigeer op uw AEM naar` crx-quickstart/launchpad/felix/< bundleID> /data`, waarbij `<`  bundleID`>`  is uit stap 5
8. Er is een bestand met de naam storage in de gegevensdirectory. Download deze [opslagbestand](https://raw.githubusercontent.com/cqsupport/fix-instructions/master/move-crypto-keys/storage) en vervangt u de huidige versie op de server. U moet het bestand vervangen in plaats van alleen de waarde van JCR in Bundle te wijzigen, omdat het bestand aan het einde geen nieuwe-regelteken mag hebben, voegen de meeste editors, zoals vi, een nieuwe-regelteken toe.
9. Ga naar de directory `crx-quickstart/launchpad/felix/bundle${FILE_BUNDLE_ID}/data`, waarbij ${FILE_BUNDLE_ID} wordt vervangen door de waarde Bundel-id uit stap 4 (de bundle-id com.adobe.granite.crypto.file).
10. Kopieer de foto- en hoofdbestanden die u in stap 2 hebt gedownload naar deze locatie.
11. Controleer of de foto- en hoofdbestanden overeenkomen met de bestanden die u hebt gedownload.
12. De opdrachten zijn: `md5sum hmac md5sum master` 

   Zorg ervoor dat de uitvoer hetzelfde is voor de gedownloade bestanden en de vervangen bestanden.
13. Start AEM.
14. Verwijder de basis- en hoofdeigenschappen uit /etc/key en zorg ervoor dat u deze opslaat.
15. Door deze stappen te volgen, verplaatst u de crypto sleutels van JCR aan het filesystem, die zich richt op de opslagmethode die in nieuwere AEM versies wordt verwacht. Dit zorgt ervoor dat AEM consequent toegang hebben tot de sleutels voor encryptie en decryptieverrichtingen, daardoor handhaven stabiele configuraties IMS over opnieuw begin. Aanbevolen wordt deze wijzigingen in een lagere omgeving te testen voordat ze op productiesystemen worden toegepast.

