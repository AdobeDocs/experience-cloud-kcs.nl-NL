---
title: "Hoe kan ik een synchrone AEM-index opnieuw indexeren? | AEM, eik"
description: Beschrijving
solution: Experience Manager
product: Experience Manager
applies-to: "Experience Manager"
keywords: "KCS"
resolution: Resolution
internal-notes: "Helpx Link: helpx.adobe.com/experience-manager/kb/how-to-reindex-a-synchronous-AEM-index-AEM-Oak.html"
bug: false
article-created-by: Emily Geary
article-created-date: "3/17/2021 9:19:48 PM"
article-published-by: Emily Geary
article-published-date: "3/17/2021 9:21:41 PM"
version-number: 2
article-number: KA-16460
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=3613fb7d-6687-eb11-a812-000d3a593216"
exl-id: 1209609f-84a9-4810-b7c8-1193b09f82d7
source-git-commit: 0c3e421beca46d9fe1952b1f98538a50697216a0
workflow-type: tm+mt
source-wordcount: '412'
ht-degree: 0%

---

# Hoe te om een synchrone AEM index opnieuw te indexeren | AEM, eik

## Beschrijving


Hoe kan ik een synchrone Oak-index correct opnieuw indexeren zonder downtime te veroorzaken?


## Resolutie


Het opnieuw indexeren van een synchrone index door eenvoudig het plaatsen van herindexbezit aan waar resulteert in een synchrone verrichting die een instantie van het Eak kan veroorzaken om te hangen. U voorkomt deze situatie door indexering naar een achtergrondthread te sturen.  Hiervoor voert u de volgende stappen uit:

<b>Stap 1:</b> Opnieuw indexeren in een achtergrondthread

1. Stel de volgende eigenschappen in vanuit CRXDE Lite op de indexdefinitie voor de eigenschapindex die moet worden ingeschakeld voor asynchrone indexering - `/oak:index/property` index

   `reindex=true`

   `reindex-async=true`
2. Om te bevestigen dat bovengenoemd de knoop verfrist, `async="async-reindex"` moeten worden vastgesteld.
3. De `startPropertyIndexAsyncReindex` op de `PropertyIndexAsyncReindex` MBean. Dit zou de achtergrondbaan beginnen die naar dergelijke types van indexen zou zoeken. Na het aanroepen ziet u een loglijn die opnieuw indexeert wordt uitgevoerd...
4. Als de re-indexing volledige herindexeringsvlag is zou worden teruggesteld aan vals.
5. Herhaal stap 3 om de index weer in een synchronisatieindex te wijzigen. Als de asynchrone vlag niet wordt geschrapt dan kan de boon meerdere keren moeten worden aangehaald (Dit kan gebeuren als er veranderingen die gelijktijdig die deze index beïnvloeden) gebeuren.



*Opmerking:* Alleen de `async="async-reindex"` zal worden verwijderd aangezien die controles die de indexering verbinden zullen gebeuren.  De `reindex-async` eigenschap is alleen een configuratiemarkering die niet automatisch wordt gewijzigd. Het idee is dat u het eens voor de specifieke indexdefinities zou plaatsen die al toekomstig opnieuw indexeren controleren. Dat wordt dan verwacht dat het daar blijft en dan hoef je het niet meer aan te raken.


<b>Stap 2:</b> Het controlepunt voor opnieuw indexeren verwijderen (alleen AEM 6.2 en oudere versies)

Tijdens het proces van asynchrone re-indexering, wordt een bewaarplaats controlepunt gecreeerd. Zodra de het indexeren taak heeft voltooid, moet het worden vrijgegeven zoals hieronder beschreven, om vlotte Inzameling van het Afval van de Revisie later te verzekeren:

1. Open eerst de klasse CheckpointManager MBean:

   MongoMK - [/system/console/jmx/org.apache.jackrabbit.oak%3Aname%3Document+node+store+checkpoint+management%2Ctype%3DCheckpointManger](http://localhost:4502/system/console/jmx/org.apache.jackrabbit.oak%3Aname%3DDocument+node+store+checkpoint+management%2Ctype%3DCheckpointManger)

   TarMK - [/system/console/jmx/org.apache.jackrabbit.oak%3Aname%3DSegment+node+store+checkpoint+management%2Ctype%3DCheckpointManger](http://localhost:4502/system/console/jmx/org.apache.jackrabbit.oak%3Aname%3DSegment+node+store+checkpoint+management%2Ctype%3DCheckpointManger)
2. De `listCheckpoints()` bewerking
3. Zoek de rij met controlepunten met de `name=async-reindex` eigenschap.
4. De id-waarde naar het klembord kopiëren

   Op MongoMK ziet het er ongeveer als volgt uit: `r1234567aaaa-0-1`

   Op TarMK ziet het er ongeveer als volgt uit: `6eac07d0-fe27-4d16-82f8-6d5da4cefd67`
5. Open vervolgens het dialoogvenster `releaseCheckpoint()` bewerking.
6. Plak de gekopieerde id als p1 en klik op Invoke.
7. Met deze stap wordt het controlepunt vrijgegeven.
