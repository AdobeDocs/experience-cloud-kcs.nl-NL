---
title: "Adobe Managed Services (AMS) Basic File Layout"
description: "Leer over de AMS standaardreeks van het configuratiedossier en de gedachte achter deze configuratiestandaard."
solution: Experience Manager
product: Experience Manager
applies-to: "Experience Manager"
keywords: "KCS"
resolution: Resolution
internal-notes: null
bug: false
article-created-by: Utkarsh Jha
article-created-date: "6/19/2024 7:21:07 PM"
article-published-by: Utkarsh Jha
article-published-date: "6/19/2024 8:01:15 PM"
version-number: 5
article-number: KA-17502
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=607d4f10-712e-ef11-840a-00224809e160"
source-git-commit: f362309ff7ac59fb99a7266533bcf738557dec56
workflow-type: tm+mt
source-wordcount: '1104'
ht-degree: 0%

---

# Basisbestandsindeling van Adobe Managed Services (AMS)


Ontdek de standaardconfiguratiestandaard van AMS en de gedachte achter deze configuratiestandaard in Adobe Experience Manager.

## Beschrijving {#description}


<b>Omgeving</b>

Adobe Experience Manager

<b>Probleem/symptomen</b>

In dit document wordt uitleg gegeven over de standaard AMS-configuratiereeks en de gedachte achter deze configuratiestandaard.


## Resolutie {#resolution}


<b>Standaard Enterprise Linux-mapstructuur</b>

In AMS gebruikt de basisinstallatie Enterprise Linux als het basisbesturingssysteem. Wanneer u Apache Webserver installeert, wordt standaard een installatiebestand geïnstalleerd. Hier zijn de standaarddossiers die worden geïnstalleerd door basisRPMs te installeren die door `yum` opslagplaats.


| `/etc/httpd/``├── conf``│   ├── httpd.conf``│   └── magic``├── conf.d``│   ├── autoindex.conf``│   ├── README``│   ├── userdir.conf``│   └── welcome.conf``├── conf.modules.d``│   ├── 00-base.conf``│   ├── 00-dav.conf``│   ├── 00-lua.conf``│   ├── 00-mpm.conf``│   ├── 00-proxy.conf``│   ├── 00-systemd.conf``│   └── 01-cgi.conf``├── logs -> ../../var/log/httpd``├── modules -> ../../usr/lib64/httpd/modules``└── run -> /run/httpd` |
| --- |


Wanneer u het installatieontwerp/de installatiestructuur volgt en in acht neemt, krijgt u de volgende voordelen:

- Eenvoudiger ondersteuning voor een voorspelbare indeling
- Automatisch bekend bij iedereen die in het verleden aan Enterprise Linux HTTPD heeft gewerkt
- Hiermee worden patchcycli toegestaan die volledig worden ondersteund door het besturingssysteem zonder conflicten of handmatige aanpassingen
- Hiermee voorkomt u schendingen van SELinux van verkeerd gelabelde bestandskaders


Opmerking:

De Adobe Managed Services-serverimages hebben doorgaans kleine hoofdstations van het besturingssysteem. De gegevens worden in een apart volume geplaatst, waarin ze doorgaans worden gemonteerd `/mnt`

Vervolgens wordt volume gebruikt in plaats van de standaardinstellingen voor de volgende standaardmappen:

<b>DocumentRoot</b>

- Standaard: `/var/www/html`
- AMS: `/mnt/var/www/html`


<b>Logboekmap</b>

- Standaard: `/var/log/httpd`
- AMS: `/mnt/var/log/httpd`


Houd in mening dat de oude en nieuwe folders terug naar het originele onderstelpunt worden in kaart gebracht om verwarring te elimineren. Het gebruik van een afzonderlijk volume is niet van vitaal belang, maar het is opmerkelijk.

<b>AMS-invoegtoepassingen</b>

AMS voegt een aanvulling toe op de basisinstallatie van de Apache-webserver.

<b>Documentrasters</b>

AMS-standaardachterbasis voor documenten:

- Auteur: `/mnt/var/www/author/`
- Publiceren: `/mnt/var/www/html/`
- Onderhoud van alle vangsten en health check: `/mnt/var/www/default/`


<b>Staging en Enabled VirtualHost Directories</b>

Met de volgende mappen kunt u configuratiebestanden samenstellen met een parkeergebied, zodat u aan bestanden kunt werken en deze alleen kunt inschakelen wanneer ze gereed zijn.

- `/etc/httpd/conf.d/available_vhosts/`
   - In deze map worden alle `<` VirtualHost /`>`  bestanden aangeroepen `.vhost`
- `/etc/httpd/conf.d/enabled_vhosts/`
   - Wanneer u klaar bent om te gebruiken `.vhost` bestanden die zich in de `available_vhosts` de map te symboliseren met een relatief pad naar de `enabled_vhosts` directory.


<b>Extra `conf.d` Mappen</b>

Er zijn extra onderdelen die veel voorkomen in Apache-configuraties. We hebben submappen gemaakt, zodat deze op een schone manier kunnen worden gescheiden en niet alle bestanden in één map kunnen staan.

1. <b>Map opnieuw schrijven</b>    Deze map kan alle `\*_rewrite.rules` bestanden die u maakt, die uw standaardbestanden bevatten *RewriteRule* syntaxis voor Apache-webservers [mod_rewrite](https://httpd.apache.org/docs/current/mod/mod_rewrite.html) -module.

   - `/etc/httpd/conf.d/rewrites/`
2. <b>Map Whitelists</b>    Deze map kan alle `\*_whitelist.rules` bestanden die u maakt, die uw standaardbestanden bevatten *IP toestaan* of *IP vereisen* syntaxis voor Apache-webservers [toegangsbesturingselementen](https://httpd.apache.org/docs/2.4/howto/access.html)

   - `/etc/httpd/conf.d/whitelists/`
3. <b>Directory voor variabelen</b>    Deze map kan alle `\*.vars` bestanden die u maakt en variabelen bevatten die u in uw configuratiebestanden kunt gebruiken

   - `/etc/httpd/conf.d/variables/`


<b>Specifieke configuratiemap van de module Dispatcher</b>

Apache-webserver is zeer uitbreidbaar en wanneer een module meerdere configuratiebestanden heeft, is het raadzaam om uw eigen configuratiemap in de installatieleiding te maken in plaats van de standaardmap te verwarren.

De beste praktijken worden gecreeerd en gevolgd.

<b>Module configuratiebestand</b>

- `/etc/httpd/conf.dispatcher.d/`


<b>Staging en Enabled Farm Directories</b>

Met de volgende mappen kunt u configuratiebestanden samenstellen met een parkeergebied, zodat u aan bestanden kunt werken en deze alleen kunt inschakelen wanneer ze gereed zijn.

- `/etc/httpd/conf.dispatcher.d/available_farms/`
   - In deze map worden alle `/myfarm {` bestanden aangeroepen `*_farm.any`
- `/etc/httpd/conf.dispatcher.d/enabled_farms/`
   - Wanneer u bereid bent om het landbouwbedrijfdossier te gebruiken dat u binnen hebt `available_farms` de map te symboliseren met een relatief pad naar de `enabled_farms` directory


<b>Extra `conf.dispatcher.d` Mappen</b>

Er zijn extra stukken die subsecties zijn van de configuraties van het het landbouwbedrijfdossier van de Verzender en de subfolders worden gecreeerd om voor een schone manier toe te staan om die dossiers te scheiden en niet alle dossiers in één folder te hebben.

1. <b>Cache Directory</b>    Deze map bevat alle `*_cache.any`, `*_invalidate.any` bestanden die u maakt, bevatten uw regels voor de manier waarop u wilt dat de module caching-elementen van AEM en syntaxis voor validatieregels afhandelt.  Meer informatie over deze sectie vindt u in [hier](https://docs.adobe.com/content/help/en/experience-manager-dispatcher/using/configuring/dispatcher-configuration.html#configuring-the-dispatcher-cache-cache).

   - `/etc/httpd/conf.dispatcher.d/cache/`
2. <b>Map met clientkoppen</b>    Deze map kan alle `*_clientheaders.any` de dossiers u creeert die lijsten van de Kopballen van de Cliënt bevatten u tot AEM wilt overgaan wanneer een verzoek binnen komt.  Meer informatie over deze sectie is [hier](https://docs.adobe.com/content/help/en/experience-manager-dispatcher/using/configuring/dispatcher-configuration.html#specifying-the-http-headers-to-pass-through-clientheaders)

   - `/etc/httpd/conf.dispatcher.d/clientheaders/`
3. <b>Filtermap</b>    Deze map kan alle `*_filters.any` de dossiers u creeert die al uw filterregels bevatten om verkeer door Dispatcher te blokkeren of toe te staan om AEM te bereiken.

   - `/etc/httpd/conf.dispatcher.d/filters/`
4. <b>Map renderen</b>    Deze map kan alle `*_renders.any` bestanden die u maakt en die de connectiviteitsgegevens bevatten voor elke backendserver waarvan de Dispatcher inhoud gebruikt.

   - `/etc/httpd/conf.dispatcher.d/renders/`
5. <b>Vhosts-map</b>    Deze map kan alle `*_vhosts.any` de dossiers u creeert die een lijst van de domeinnamen en wegen bevatten om met een bepaald landbouwbedrijf aan een bepaalde achtereindserver aan te passen.

   - `/etc/httpd/conf.dispatcher.d/vhosts/`


<b>Volledige mapstructuur</b>

AMS heeft elk bestand gestructureerd met aangepaste bestandsextensies en met de bedoeling naamruimteproblemen/conflicten en verwarring te voorkomen.

Hier volgt een voorbeeld van een standaardbestandsset van een standaardimplementatie van AMS:
` `

| `/etc/httpd/``├── conf``│   ├── httpd.conf``│   └── magic``├── conf.d``│   ├── autoindex.conf``│   ├── available_vhosts``│   │   ├── 000_unhealthy_author.vhost``│   │   ├── 000_unhealthy_publish.vhost``│   │   ├── aem_author.vhost``│   │   ├── aem_flush.vhost``│   │   ├── aem_health.vhost``│   │   ├── aem_lc.vhost``│   │   └── aem_publish.vhost``│   ├── dispatcher_vhost.conf``│   ├── enabled_vhosts``│   │   ├── aem_author.vhost -> ../available_vhosts/aem_author.vhost``│   │   ├── aem_flush.vhost -> ../available_vhosts/aem_flush.vhost``│   │   ├── aem_health.vhost -> ../available_vhosts/aem_health.vhost``│   │   └── aem_publish.vhost -> ../available_vhosts/aem_publish.vhost``│   ├── README``│   ├── rewrites``│   │   ├── base_rewrite.rules``│   │   └── xforwarded_forcessl_rewrite.rules``│   ├── userdir.conf``│   ├── variables``│   │   └── ams_default.vars``│   ├── welcome.conf``│   └── whitelists``│       └── 000_base_whitelist.rules``├── conf.dispatcher.d``│   ├── available_farms``│   │   ├── 000_ams_author_farm.any``│   │   ├── 001_ams_lc_farm.any``│   │   └── 999_ams_publish_farm.any``│   ├── cache``│   │   ├── ams_author_cache.any``│   │   ├── ams_author_invalidate_allowed.any``│   │   ├── ams_publish_cache.any``│   │   └── ams_publish_invalidate_allowed.any``│   ├── clientheaders``│   │   ├── ams_author_clientheaders.any``│   │   ├── ams_common_clientheaders.any``│   │   ├── ams_lc_clientheaders.any``│   │   └── ams_publish_clientheaders.any``│   ├── dispatcher.any``│   ├── enabled_farms``│   │   ├── 000_ams_author_farm.any -> ../available_farms/000_ams_author_farm.any``│   │   └── 999_ams_publish_farm.any -> ../available_farms/999_ams_publish_farm.any``│   ├── filters``│   │   ├── ams_author_filters.any``│   │   ├── ams_lc_filters.any``│   │   └── ams_publish_filters.any``│   ├── renders``│   │   ├── ams_author_renders.any``│   │   ├── ams_lc_renders.any``│   │   └── ams_publish_renders.any``│   └── vhosts``│       ├── ams_author_vhosts.any``│       ├── ams_lc_vhosts.any``│       └── ams_publish_vhosts.any``├── conf.modules.d``│   ├── 00-base.conf``│   ├── 00-dav.conf``│   ├── 00-lua.conf``│   ├── 00-mpm.conf``│   ├── 00-proxy.conf``│   ├── 00-systemd.conf``│   ├── 01-cgi.conf``│   └── 02-dispatcher.conf``├── logs -> ../../var/log/httpd``├── modules -> ../../usr/lib64/httpd/modules``└── run -> /run/httpd` |
| --- |


<b>Het ideaal houden</b>

Enterprise Linux heeft patchcycli voor het Apache Webserver Package (httpd).

Hoe minder geïnstalleerde standaardbestanden, hoe beter u, omdat de oplossingen voor patches of configuratieverbeteringen die u hebt aangebracht met de opdracht RPM/Yum, niet van toepassing zijn op de bovenkant van een gewijzigd bestand.

In plaats daarvan wordt een `.rpmnew` naast het origineel.  Dit betekent u sommige veranderingen zult missen u zou kunnen gewild en meer huisvuil in uw configuratiemappen tot stand gebracht hebben.

Enterprise linux is op de juiste wijze ingesteld om deze gebruikszaak beter af te handelen.  U krijgt gebieden waarin u de standaardinstellingen die u voor u instelt, kunt uitbreiden of overschrijven.  In de basisinstallatie van httpd vindt u het bestand `/etc/httpd/conf/httpd.conf`en bevat de syntaxis, zoals:


```
Include conf.modules.d/*.conf


IncludeOptional conf.d/*.conf
```


Het idee is dat Apache wil dat u de modules en configuraties uitbreidt in het toevoegen van nieuwe bestanden aan de `/etc/httpd/conf.d/` en `/etc/httpd/conf.modules.d/` mappen met een bestandsextensie van `.conf`

Als perfect voorbeeld bij het toevoegen van de verzendingsmodule aan Apache, zou u een module creëren `.so` bestand in `/etc/httpd/modules/` en neem het vervolgens op door een bestand toe te voegen in `/etc/httpd/conf.modules.d/02-dispatcher.conf` met de inhoud die uw module moet laden `.so` bestand.


```
LoadModule dispatcher_module modules/mod_dispatcher.so
```


U ziet dat de bestaande Apache-bestanden niet worden gewijzigd. U hebt zojuist de uwe toegevoegd aan de directory&#39;s die ze moesten gebruiken.

De module in het bestand gebruiken `/etc/httpd/conf.d/dispatcher_vhost.conf` die de module initialiseert en het aanvankelijke module specifieke configuratiedossier laadt.


```
<IfModule disp_apache2.c>

DispatcherConfig conf.dispatcher.d/dispatcher.any

...SNIP...</IfModule>
```


Ook hier zult u zien dat we bestanden en modules hebben toegevoegd, maar geen originele bestanden hebben gewijzigd.  Dit geeft de gewenste functionaliteit en beschermt tegen ontbrekende gezochte repareerde flard evenals het houden aan het hoogste niveau van verenigbaarheid met elke verbetering van het pakket.
