---
title: "AEM indexeringsproblemen analyseren"
description: "Leer hoe u problemen met AEM indexering kunt analyseren."
solution: Experience Manager
product: Experience Manager
applies-to: "Experience Manager"
keywords: "KCS, AEM, ervaringsmanager, indexeringsproblemen, opnieuw indexeren, async index, problemen oplossen"
resolution: Resolution
internal-notes: null
bug: false
article-created-by: Dharmender Singh
article-created-date: "4/24/2024 6:26:23 PM"
article-published-by: Dharmender Singh
article-published-date: "4/24/2024 6:35:02 PM"
version-number: 8
article-number: KA-17492
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=c9523e22-6802-ef11-a1fd-6045bd026dc7"
source-git-commit: de1265b8fc204dc046eba2c73a28348c0949a7de
workflow-type: tm+mt
source-wordcount: '552'
ht-degree: 0%

---

# Problemen met AEM indexeren analyseren


In dit artikel wordt uitgelegd hoe u langzame query&#39;s kunt analyseren, asynchrone indexen opnieuw kunt indexeren en hoe u problemen met AEM indexering kunt oplossen.

## Beschrijving {#description}


### Omgeving

Experience Manager

### Probleem/symptomen

Hoe te om alle gemeenschappelijke indexerende kwesties problemen op te lossen?


## Resolutie {#resolution}


### Langzame query&#39;s analyseren

Ga naar <b>Gereedschappen</b> `>`  <b>Bewerkingen</b> `>`  <b>Dashboard</b> `>`  <b>Diagnose</b> `>`  <b>Query-prestaties</b> wordt de lijst met trage query&#39;s weergegeven.

Zie [dit document](https://docs.adobe.com/docs/en/aem/6-2/deploy/platform/queries-and-indexing.html#Troubleshooting%20indexing%20issues) voor details over het analyseren van de langzame vragen.

In niet-productiemilieu&#39;s, kan het AEM ACS-hulpmiddelpakket worden geïnstalleerd om een verklarend vraaghulpmiddel voor verdere het zuiveren te verstrekken.

### Async-indexen opnieuw indexeren

<b>Opmerking:</b> Het opnieuw indexeren lost typisch vraagkwesties, zoals vragen niet op die de juiste resultaten terugkeren. Herindexering kan ook veel tijd in beslag nemen. Herindexering moet worden vermeden, tenzij daarvoor een in dat artikel vermelde reden wordt gebruikt.

<b>Een asynchrone index opnieuw definiëren</b>

- Aanmelden bij uw AEM
- http://aemhost:port/crx/de/index.jsp openen
- Blader naar de indexdefinitie onder /oak:index
- Stel een Booleaanse eigenschap in die opnieuw wordt ingesteld op true op de index en sla deze vervolgens op. Wanneer het indexeren begint zou u een logboekbericht als dit zien:


  ```
  23.06.2015 14:26:23.070 *INFO* [ FelixStartLevel] 
  org.apache.jackrabbit.oak.plugins.index.IndexUpdate Reindexing will be performed for following indexes: 
  [ /oak:index/cqAcUUID, /oak:index/nodetype, /oak:index/deviceIdentificationMode, /oak:index/campaignpath, /oak:index/active, /oak:index/jcrFrozenMixinTypes]
  ```


- Tijdens het opnieuw indexeren wordt het kenmerk &#39;status&#39; van IndexStatsMBean gebruikt als waarde &#39;running&#39;.


  ```
  23.06.2015 14:26:23.517 *INFO* [ FelixStartLevel] 
  org.apache.jackrabbit.oak.plugins.index.IndexUpdate Reindexing Traversed #10000 /jcr:system/jcr:versionStorage/c8/5f...
  23.06.2015 14:28:51.999 *INFO* [ pool-8-thread-1]  org.apache.jackrabbit.oak.plugins.index.IndexUpdate Indexing
  report    - /oak:index/counter
  (708)    - /oak:index/authorizables
  (159)    - /oak:index/cqPageLucene
  (1913)    - /oak:index/ntBaseLucene
  (444)    - /oak:index/cqTagLucene
  (512)    - /oak:index/workflowDataLucene*(116)
  ```


- U kunt bevestigen dat het indexeren voltooid door uw knoop van de indexdefinitie te controleren, de bezit herdexCount zou moeten zijn verhoogd en de herindexbooleaanse zou aan &quot;vals&quot;moeten worden geplaatst.


  Als de indexering is voltooid in het logbestand, wordt de volgende vermelding weergegeven:


  ```
  23.06.2015 14:28:52.009 *INFO* [ pool-8-thread-1] 
  org.apache.jackrabbit.oak.plugins.index.AsyncIndexUpdate Reindexing (async) completed for indexes: 
  [ /oak:index/counter*(708), /oak:index/authorizables*(159),
  /oak:index/cqPageLucene*(1913), /oak:index/ntBaseLucene*(444),
  /oak:index/cqTagLucene*(512), /oak:index/workflowDataLucene*(116)] 
  in 30.36 s
  ```


- Als het opnieuw indexeren niet voltooit en in een lijn is gegaan dan zie de sectie onder de titel Analyseren Mislukt het opnieuw indexeren.
- De asynchrone indexactiviteit kan op INFO-niveau worden geïdentificeerd door begroeting op:


  ```
  org.apache.jackrabbit.plugins.index.IndexUpdate, and
  org.apache.jackrabbit.plugins.index.AsyncIndexUpdate
  ```


#### Problemen met asynchrone indexprestaties

1. Logboek inschakelen om timing te valideren:


   TRACE-niveau (alleen in eikenhout 1.0.17 of hoger):


   ```
   org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexEditorContext.perf
   ```



   FOUTOPSPORINGSPUNT:


   ```
   org.apache.jackrabbit.oak.plugins.index.AsyncIndexUpdate
   org.apache.jackrabbit.oak.plugins.index.IndexUpdate
   org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexEditor
   org.apache.jackrabbit.oak.plugins.index.lucene.IndexTracker
   org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexEditorContext
   org.apache.jackrabbit.oak.plugins.index.lucene.IndexCopier
   ```



   Logbestanden als deze worden gegenereerd met de timing voor indexering:


   ```
   09.07.2015 08:13:38.401 *TRACE* [ 192.168.193.1 [ 1436444018387]  POST /content/dam/site/test.createasset.html HTTP/1.1]  org.apache.jackrabbit.oak.jcr.operations.writes [ session-101777]  Adding node [ /content/dam/site/test/jackrabbit-oak7.png] 
   
   
   09.07.2015 08:13:38.583 *TRACE* [ 192.168.193.1 [ 1436444018387]  POST /content/dam/site/test.createasset.html HTTP/1.1]  org.apache.jackrabbit.oak.jcr.operations.writes [ session-101777]  save
   
   
   09.07.2015 08:13:42.823 *DEBUG* [ pool-9-thread-1]  org.apache.jackrabbit.oak.plugins.index.AsyncIndexUpdate Running background index task async
   
   
   09.07.2015 08:13:42.963 *TRACE* [ pool-9-thread-1]  org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexEditor [ /oak:index/lucene]  Indexed document for /content/dam/site/test/jackrabbit-oak7.png/jcr:content/related is Document<stored,indexed,omitNorms,indexOptions=DOCS_ONLY<:path:/content/dam/site/test/jackrabbit-oak7.png/jcr:content/related> indexed,tokenized<:fulltext:related>>
   
   
   09.07.2015 08:13:43.579 *DEBUG* [ pool-9-thread-1]  org.apache.jackrabbit.oak.plugins.index.IndexUpdate Indexing report
   - /oak:index/siteDamIndex(2)
   - /oak:index/lucene(15)
   
   
   09.07.2015 08:13:43.779 *TRACE* [ oak-lucene-0]  org.apache.jackrabbit.oak.plugins.index.lucene.IndexTracker.perf [ /oak:index/siteDamIndex]  Index found to be updated. Reopening the IndexNode [ took 150ms] 
   
   
   09.07.2015 08:13:45.248 *TRACE* [ oak-lucene-0]  org.apache.jackrabbit.oak.plugins.index.lucene.IndexCopier.perf [ /oak:index/lucene]  Copied 0 files totaling 0 B [ took 1465ms] 
   
   
   09.07.2015 08:13:45.248 *TRACE* [ oak-lucene-0]  org.apache.jackrabbit.oak.plugins.index.lucene.IndexCopier [ /oak:index/lucene]  opening remote only file segments.gen
   
   
   09.07.2015 08:13:45.361 *TRACE* [ oak-lucene-0]  org.apache.jackrabbit.oak.plugins.index.lucene.IndexTracker.perf [ /oak:index/lucene]  Index found to be updated. Reopening the IndexNode [ took 1581ms]
   ```


2. Neem een reeks draaddumps en onderzoek naar de draad die AsyncIndexUpdate in de stapel bevat om te zien waar het grootste deel van de indexerende tijd wordt besteed of als het indexeren op sommige andere draden wacht. Om draaddumpen te nemen zie [dit artikel](https://experienceleague.adobe.com/docs/experience-cloud-kcs/kbarticles/KA-17452.html).
3. Stel de Booleaanse eigenschap saveDirectoryListing=true in (alleen als Oak 1.0.16 wordt gebruikt, als latere versie dan niet nodig is) en stel eigenschap excludePaths= in`[` /var, /etc/workflow/instances, /jcr:system`]`  op /oak:index/lucene OTB index om het te optimaliseren.
4. Klikken <b>Alles opslaan</b>.
5. Wanneer u de indexen van het douanebezit van de lucene creeert, zorg ervoor om saveDirectoryListing=true (Van Boole) te plaatsen als het gebruiken van Eak 1.0.16 en reeks includedPaths (Koord)`[` `]` ) gebruiken om de index te beperken tot het indexeren van bepaalde paden.
6. Ga naar deze URL `/system/console/configMgr/org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexProviderService` &quot;Kopiëren bij lezen&quot;, &quot;Kopiëren bij schrijven&quot; (alleen veilig voor gebruik in Eak 1.0.18 en hoger) en &quot;Prefetch Index Files&quot; (alleen in Eak 1.0.18 en hoger)


#### Analyseren mislukt opnieuw indexeren

1. Wanneer async het indexeren toen ontbreekt wanneer u de Async Indexer status JMX UI (verbinding hieronder) controleert, zou u zien dat LastIndexedTime een oude datum en tijd is: `http://localhost:4502/system/console/jmx/org.apache.jackrabbit.oak%3Aid%3D11%2Cname%3D"async"%2Ctype%3D"IndexStats"`
2. Wanneer het opnieuw indexeren ontbreekt gaat het in een lijn als dit:


   ```
   08.01.2015 01:22:04.474 *INFO* [ pool-9-thread-2]  
   org.apache.jackrabbit.oak.plugins.index.IndexUpdate Reindexing will be performed for following indexes 
   [ /oak:index/damFileSize, /oak:index/lucene, /oak:index/cqLastModified] 08.01.2015 01:52:08.365 *INFO* [ pool-9-thread-5]  
   org.apache.jackrabbit.oak.plugins.index.IndexUpdate Reindexing will be performed for following indexes 
   [ /oak:index/damFileSize, /oak:index/lucene, /oak:index/cqLastModified] 08.01.2015 09:33:23.306 *INFO* [ pool-9-thread-5]  
   org.apache.jackrabbit.oak.plugins.index.IndexUpdate Reindexing will be performed for following indexes 
   [ /oak:index/damFileSize, /oak:index/lucene, /oak:index/cqLastModified]
   ```


3. Als u ziet dan zou u moeten toelaten zuivert niveau registreren voor `org.apache.jackrabbit.oak.plugins.index`
4. De volgende tijd de indexerende lijnen met het logboekbericht boven zuivert logboekbericht boven het meer details over zou geven waarom het indexeren ontbreekt. Vervolgens kunt u het probleem oplossen, of het nu een beschadigd knooppunt is, een ontbrekende blob of een ander probleem.

