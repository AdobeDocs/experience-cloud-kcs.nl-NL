---
title: "Video-analyse implementeren in Adobe Launch"
description: "Ontdek de implementatie van YouTube video tracking in Adobe Launch with Media Heartbone SDK."
solution: Analytics
product: Analytics
applies-to: "Analytics"
keywords: "KCS, Adobe Launch, Video Analytics, Heartbeat, Adobe Experience Cloud, Adobe Launch UI"
resolution: Resolution
internal-notes: "This implementation discussed in this article does not use Adobe Launch extension for Media Analytics."
bug: false
article-created-by: Eshaa Tiwari
article-created-date: "1/17/2024 2:25:48 PM"
article-published-by: Oleksandra Marchenko
article-published-date: "1/23/2024 3:11:35 PM"
version-number: 10
article-number: KA-15023
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=9c4f824d-44b5-ee11-a569-6045bd006b3d"
source-git-commit: 9f3e2e706456534db9221844e784616fa84472ea
workflow-type: tm+mt
source-wordcount: '661'
ht-degree: 0%

---

# Video-analyse implementeren in Adobe Launch


Leer hoe u uw analysemogelijkheden kunt verbeteren door YouTube-videotracering te implementeren in Adobe Launch met de Media Heartbone SDK.

## Beschrijving {#description}


### Omgeving

Dit artikel bevat stappen voor het implementeren van YouTube-videotracering in Adobe Launch met gebruik van Media Heartbone SDK.

### Probleem/symptomen

<b>Voorwaarden</b>


| <ol><li>U hebt een actieve implementatie van het Begin van de Adobe.</li><li>De rapportsuite is ingeschakeld voor Media Collection.</li><li>De rapportsuite is toegewezen aan het juiste Analytics-aanmeldingsbedrijf in Adobe Experience Cloud.</li><li>U hebt publicatierechten in Adobe Launch.</li><li>U bent vertrouwd met de UI van de Lancering van de Adobe en hoe het werkt.</li></ol><br> |
| --- |



## Resolutie {#resolution}


<b>STAP 1: Nieuwe regel maken</b>

Maak een nieuwe regel in de Adobe Launch-eigenschap door op de knop &quot;Regel toevoegen&quot; onder het tabblad &quot;Regels&quot; te klikken. Deze regel bevat de gebeurtenisvoorwaarde voor het laden van YouTube-video en de scripts Video Analytics en YouTube iFrame API.

- Geef de regelnaam op in het tekstvak Naam.


<b>STAP 2: Gebeurtenissen en/of voorwaarden toevoegen</b>

Klik op + onder Gebeurtenis en Voorwaarden om voorwaarden te maken voor het starten van YouTube-video. In mijn voorbeeld heb ik de voorwaarde &#39;Element bestaat&#39; toegevoegd om te zoeken naar een specifieke div &#39;player&#39; waarmee de YouTube-video kan worden gestart.

<b>STAP 3: Voeg Acties toe - de Variabelen van de Configuratie</b>

Klik op + onder handelingen om een nieuw actiepunt te maken. Dit zal als één enkel punt van configuratie voor de variabelen van de opstellingsVideoAnalytics dienst doen. Ik heb enkele hard-gecodeerde waarden gebruikt. U kunt echter gegevenselementen gebruiken om deze variabelen te vullen.

1. Selecteer &quot;Kern&quot; in de vervolgkeuzelijst Extensie.
2. Selecteer Aangepaste code in de keuzelijst Type handeling.
3. Voeg de naam van de Actie in de tekstvakje van de Naam toe.
4. Selecteer Javascript onder Taal.
5. Schakel &quot;Globaal uitvoeren&quot; in.
6. Klik op Editor openen.
7. Voeg de code toe en klik sparen. Zorg ervoor dat u de waarden volgens uw bedrijf en rapportsuite bijwerkt.



```
(function() {    'use strict';
    // Export symbols.
    window.Configuration = {
        PLAYER: {
            NAME: 'sample player name'
            //VIDEO_ID: 'sample video id',
           //VIDEO_NAME: sample video name'
        },
        VISITOR: {
            MARKETING_CLOUD_ORG_ID: 'experience cloud ID',
            TRACKING_SERVER: 'tracking server',
            DPID: '',
            DPUUID: ''
        },
        APP_MEASUREMENT: {
            RSID: 'report suite id',
            TRACKING_SERVER: 'tracking server',
            PAGE_NAME: 'page name',
            CHAR_SET: 'UTF-8'
        },
        HEARTBEAT: {
            TRACKING_SERVER: 'heartbeat tracking server',
            PUBLISHER: 'publisher id',
            CHANNEL: 'channel',
            OVP: 'ovp name',
            SDK: 'sgk version',
       SSL: 'false',
       DEBUG: 'true'
        }
    };
})();
(function() {    'use strict';
    // Export symbols.
    window.Configuration = {
        PLAYER: {
            NAME: 'sample player name'
            //VIDEO_ID: 'sample video id',
           //VIDEO_NAME: sample video name'
        },
        VISITOR: {
            MARKETING_CLOUD_ORG_ID: 'experience cloud ID',
            TRACKING_SERVER: 'tracking server',
            DPID: '',
            DPUUID: ''
        },
        APP_MEASUREMENT: {
            RSID: 'report suite id',
            TRACKING_SERVER: 'tracking server',
            PAGE_NAME: 'page name',
            CHAR_SET: 'UTF-8'
        },
        HEARTBEAT: {
            TRACKING_SERVER: 'heartbeat tracking server',
            PUBLISHER: 'publisher id',
            CHANNEL: 'channel',
            OVP: 'ovp name',
            SDK: 'sgk version',
       SSL: 'false',
       DEBUG: 'true'
        }
    };
})();
```


<b>STAP 4: Bezoekersidentiteitsservice voor handelingen toevoegen</b>

Media Analytics heeft een instantie van de Bezoeker-id-service nodig. U moet de code voor de bezoekersidentiteitsservice downloaden van Codebeheer in de gebruikersinterface van Adobe Analytics.

Als u eenmaal de code van de bezoekersidentiteitsservice hebt gedownload, klikt u op + onder handelingen om een nieuw actiepunt te maken, en vervolgens

1. Selecteer &quot;Kern&quot; in de vervolgkeuzelijst Extensie.
2. Selecteer Aangepaste code in de keuzelijst Type handeling.
3. Voeg de naam van de Actie in de tekstvakje van de Naam toe.
4. Selecteer Javascript onder Taal.
5. Schakel &quot;Globaal uitvoeren&quot; in.
6. Klik op Editor openen.
7. Voeg onderaan de volgende code toe en klik op Opslaan.



```
var visitor = Visitor.getInstance("Experience Cloud ID", {
trackingServer: "tracking server", // same as s.trackingServer
trackingServerSecure: " tracking server " // same as s.trackingServerSecure
});
```


<b>STAP 5: Handelingen toevoegen - Code meting toepassen</b>

Voor Media Analytics is een instantie van Appmeasurement vereist. U moet het bestand downloaden van Codebeheer in de gebruikersinterface van Adobe Analytics.

Als u eenmaal de toepassingscode hebt gedownload, klikt u op + onder handelingen om een nieuw actiepunt te maken en vervolgens

1. Selecteer &quot;Kern&quot; in de vervolgkeuzelijst Extensie.
2. Selecteer Aangepaste code in de keuzelijst Type handeling.
3. Voeg de naam van de Actie in de tekstvakje van de Naam toe.
4. Selecteer Javascript onder Taal.
5. Schakel &quot;Globaal uitvoeren&quot; in.
6. Klik op Editor openen.
7. Servicecode bezoeker-id toevoegen.
8. Voeg bovenaan de code de volgende code toe en klik op Opslaan.



```
// Initialize AppMeasurement
var s_account="report suite id"
var s=s_gi(s_account)
/<b></b><b></b> VISITOR ID SERVICE CONFIG - REQUIRES VisitorAPI.js <b></b><b></b>/
s.visitor=Visitor.getInstance("Experience Cloud ID")
```


<b>STAP 6: Handelingen toevoegen - hartslagcode</b>

Heartbone SDK downloaden van [https://github.com/Adobe-Marketing-Cloud/media-sdks/tree/master/sdks/js/libs](https://github.com/Adobe-Marketing-Cloud/media-sdks/tree/master/sdks/js/libs).

Als u eenmaal de hartslagcode hebt gedownload, klikt u op + onder handelingen om een nieuw actiepunt te maken en vervolgens

1. Selecteer &quot;Kern&quot; in de vervolgkeuzelijst Extensie.
2. Selecteer Aangepaste code in de keuzelijst Type handeling.
3. Voeg de naam van de Actie in de tekstvakje van de Naam toe.
4. Selecteer Javascript onder Taal.
5. Schakel &quot;Globaal uitvoeren&quot; in.
6. Klik op Editor openen.
7. Servicecode bezoeker-id toevoegen.
8. Voeg onderaan de volgende code toe en klik op Opslaan.



```
//Create a local reference to the MediaHeartbeat classes

var MediaHeartbeat = ADB.va.MediaHeartbeat;
var MediaHeartbeatConfig = ADB.va.MediaHeartbeatConfig;
var MediaHeartbeatDelegate = ADB.va.MediaHeartbeatDelegate;

//Media Heartbeat initialization

var mediaConfig = new MediaHeartbeatConfig();
mediaConfig.trackingServer = Configuration.HEARTBEAT.TRACKING_SERVER;
mediaConfig.playerName = Configuration.PLAYER.NAME;
mediaConfig.channel = Configuration.HEARTBEAT.CHANNEL;
mediaConfig.debugLogging = Configuration.HEARTBEAT.DEBUG;

mediaConfig.appVersion = Configuration.HEARTBEAT.SDK;
mediaConfig.ssl = Configuration.HEARTBEAT.SDK;
mediaConfig.ovp = Configuration.HEARTBEAT.OVP;

// Implement the MediaHeartbeatDelegate protocol.
var mediaDelegate = new MediaHeartbeatDelegate();

// Initialize

var appMeasurement = new AppMeasurement();
appMeasurement.visitor = visitor;
appMeasurement.trackingServer = Configuration.APP_MEASUREMENT.TRACKING_SERVER;
appMeasurement.account = Configuration.APP_MEASUREMENT.RSID;
appMeasurement.pageName = Configuration.APP_MEASUREMENT.PAGE_NAME;
appMeasurement.charSet = Configuration.APP_MEASUREMENT.CHAR_SET;
var contextData = {
        pageURL: document.URL,
        isUserLoggedIn: "false",
        tvStation: "Sample TV station",
        programmer: "Khurshid Alam"
        };
var mediaInfo;
var videostarted = false;
var metaDataLoaded = false;
```


<b>STAP 7: Handelingen toevoegen - YouTube IFrame API-code</b>

1. Selecteer &quot;Kern&quot; in de vervolgkeuzelijst Extensie.
2. Selecteer Aangepaste code in de keuzelijst Type handeling.
3. Voeg de naam van de Actie in de tekstvakje van de Naam toe.
4. Selecteer Javascript onder Taal.
5. Schakel &quot;Globaal uitvoeren&quot; in.
6. Klik op Editor openen.
7. Voeg de volgende code toe en sla op.



   / 2. Deze code laadt de IFrame Player API-code asynchroon.





```
var tag = document.createElement('script');
tag.src = "https://www.youtube.com/iframe_api";
var firstScriptTag = document.getElementsByTagName('script')0;
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

// 3. This function creates an iframe (and YouTube player)
//    after the API code downloads.

var player;
function onYouTubeIframeAPIReady() {
       console.log("onYouTubeIframeAPIReady called...");
       player = new YT.Player('player', {
              height: '390',
              width: '640',
              videoId: 'xWYHvIjvMnY',
              events: {
                     'onReady': onPlayerReady,
                     'onStateChange': onPlayerStateChange,
                     'onPlaybackQualityChange': onPlayerPlaybackQualityChange,
                     'onPlaybackRateChange': onPlayerPlaybackRateChange,
                     'onError': onPlayerError
              }
       });
}
```


// 4. De API roept deze functie aan wanneer de videospeler gereed is.


```
function onPlayerReady(event) {
       metaDataLoaded = true;
       player.playVideo();
}

// 5. The API calls this function when the player's state changes.
//    The function indicates that when playing a video (state=1),
//    the player should play for six seconds and then stop.

function onPlayerStateChange(event) {
       switch (event.data){
              case YT.PlayerState.PLAYING:  console.log("\*\*\*HB Playing");
                     if(metaDataLoaded){
                            if (Math.floor(event.target.getCurrentTime()) == 0) {
                                   console.log("\*\*\*HB Start");
                                   MediaHeartbeat = ADB.va.MediaHeartbeat;
                                   mediaInfo = MediaHeartbeat.createMediaObject(
                                          event.target.getVideoData().title,
                                          event.target.getVideoData().video_id,
                                          Math.floor(event.target.getDuration()),
                                         MediaHeartbeat.StreamType.VOD
                                   );
                                   MediaHeartbeat = new MediaHeartbeat(mediaDelegate, mediaConfig, appMeasurement);
                                   mediaDelegate.getCurrentPlaybackTime = function() {
                                   return Math.floor(event.target.getCurrentTime());
                           };
                                   MediaHeartbeat.trackSessionStart(mediaInfo, contextData);
                                   MediaHeartbeat.trackPlay();
                                   videostarted = true;
                     } else {
                           console.log("\*\*\*HB Play");
                           MediaHeartbeat.trackPlay();
                     }}
                     break;
              case YT.PlayerState.PAUSED:
                     console.log("\*\*\*HB Pause");
                     MediaHeartbeat.trackPause();
                     break;
              case YT.PlayerState.ENDED:
                     console.log("\*\*\*HB Ended");
                     MediaHeartbeat.trackComplete();
                     MediaHeartbeat.trackSessionEnd();
                     break;
              case -1:
                     console.log("\*\*\*HB Unloaded");
                     MediaHeartbeat.trackComplete();
                     MediaHeartbeat.trackSessionEnd();
                     break;
       }

}

function onPlayerPlaybackQualityChange(event) {
       console.log("onPlayerPlaybackQualityChange: event.data: "+ event.data);
}

function onPlayerPlaybackRateChange(event) {
       console.log("onPlayerPlaybackRateChange: event.data: "+ event.data);
}

function onPlayerError(event) {
       console.log("onPlayerError: event.data: "+ event.data);
}
```


<b>STAP 8: HTML toevoegen</b>

Voeg de volgende code in uw HTML code toe.


```
!-- 1. The iframe (and video player) will replace this div tag. --
div id="player"/divbr

STEP 9: Publish
```

Publiceer uw eigenschap en test.

