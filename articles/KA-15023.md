---
title: "Video-analyse implementeren in Adobe Launch"
description: "Leer hoe u videoanalysemogelijkheden kunt implementeren in Adobe Launch."
solution: Analytics
product: Analytics
applies-to: "Analytics"
keywords: "KCS, Adobe Launch, Video, Analytics, Launch, Adobe"
resolution: Resolution
internal-notes: "This implementation discussed in this article does not use Adobe Launch extension for Media Analytics."
bug: false
article-created-by: Dharmender Singh
article-created-date: "4/23/2024 4:47:20 PM"
article-published-by: Dharmender Singh
article-published-date: "4/23/2024 9:37:25 PM"
version-number: 13
article-number: KA-15023
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=5840f61f-9101-ef11-a1fd-6045bd026dc7"
source-git-commit: 13690a58cae69033f39e418e5e31e8d883a069f2
workflow-type: tm+mt
source-wordcount: '700'
ht-degree: 0%

---

# Video-analyse implementeren in Adobe Launch


Dit artikel bevat stappen voor het implementeren van YouTube-videotracering in Adobe Launch met gebruik van Media Heartbone SDK.

## Beschrijving {#description}


### Omgeving

Analytics

### Probleem/symptomen

Videoanalyse implementeren in Adobe Launch

#### Voorwaarden

1. U hebt een actieve implementatie van het Begin van de Adobe.
2. De rapportsuite is ingeschakeld voor Media Collection.
3. De rapportsuite is toegewezen aan het juiste Analytics-aanmeldingsbedrijf in Adobe Experience Cloud.
4. U hebt publicatierechten in Adobe Launch.
5. U bent vertrouwd met de UI van de Lancering van de Adobe en hoe het werkt.



## Resolutie {#resolution}


<b>Stap 1: Nieuwe regel maken</b>

Maak een nieuwe regel in de Adobe Launch-eigenschap door op de knop &quot;Regel toevoegen&quot; onder het tabblad &quot;Regels&quot; te klikken. Deze regel bevat de gebeurtenisvoorwaarde voor het laden van YouTube-video en de scripts Video Analytics en YouTube iFrame API.

- Geef de regelnaam op in het tekstvak Naam.


<b>Stap 2: Gebeurtenissen en/of voorwaarden toevoegen</b>

Klik op + onder Gebeurtenis en Voorwaarden om voorwaarden te maken voor het starten van YouTube-video. U hebt bijvoorbeeld de voorwaarde &#39;Element bestaat&#39; toegevoegd om te zoeken naar een specifieke div &#39;player&#39; waarmee de YouTube-video kan worden gestart.

<b>STAP 3: Handelingen toevoegen - configuratievariabelen</b>

Klik op + onder handelingen om een nieuw actiepunt te maken. Dit zal als één enkel punt van configuratie voor de variabelen van de opstellingsVideoAnalytics dienst doen. U hebt een aantal hard-gecodeerde waarden gebruikt. U kunt echter gegevenselementen gebruiken om deze variabelen te vullen.

1. Selecteer &quot;Kern&quot; in de vervolgkeuzelijst Extensie.
2. Selecteer Aangepaste code in de keuzelijst Type handeling.
3. Voeg de naam van de Actie in de tekstvakje van de Naam toe.
4. Selecteer Javascript onder Taal.
5. Schakel &quot;Globaal uitvoeren&quot; in.
6. Klik op Editor openen.
7. Voeg de code toe en klik sparen. Zorg ervoor dat u de waarden volgens uw bedrijf en rapportsuite bijwerkt.



```none
(function() {    'use strict';
    // Export symbols.
    window.Configuration = {
        PLAYER: {
            NAME: 'sample player name'
            //VIDEO_ID: 'sample video id',
           //VIDEO_NAME: sample video name'
        },
        VISITOR: {
            MARKETING_CLOUD_ORG_ID: 'experience cloud ID',
            TRACKING_SERVER: 'tracking server',
            DPID: '',
            DPUUID: ''
        },
        APP_MEASUREMENT: {
            RSID: 'report suite id',
            TRACKING_SERVER: 'tracking server',
            PAGE_NAME: 'page name',
            CHAR_SET: 'UTF-8'
        },
        HEARTBEAT: {
            TRACKING_SERVER: 'heartbeat tracking server',
            PUBLISHER: 'publisher id',
            CHANNEL: 'channel',
            OVP: 'ovp name',
            SDK: 'sgk version',
       SSL: 'false',
       DEBUG: 'true'
        }
    };
})();
(function() {    'use strict';
    // Export symbols.
    window.Configuration = {
        PLAYER: {
            NAME: 'sample player name'
            //VIDEO_ID: 'sample video id',
           //VIDEO_NAME: sample video name'
        },
        VISITOR: {
            MARKETING_CLOUD_ORG_ID: 'experience cloud ID',
            TRACKING_SERVER: 'tracking server',
            DPID: '',
            DPUUID: ''
        },
        APP_MEASUREMENT: {
            RSID: 'report suite id',
            TRACKING_SERVER: 'tracking server',
            PAGE_NAME: 'page name',
            CHAR_SET: 'UTF-8'
        },
        HEARTBEAT: {
            TRACKING_SERVER: 'heartbeat tracking server',
            PUBLISHER: 'publisher id',
            CHANNEL: 'channel',
            OVP: 'ovp name',
            SDK: 'sgk version',
       SSL: 'false',
       DEBUG: 'true'
        }
    };
})();
```




<b>STAP 4: Bezoekersidentiteitsservice voor handelingen toevoegen</b>

Media Analytics heeft een instantie van de Bezoeker-id-service nodig. U zou de code van de Dienst van identiteitskaart van de Bezoeker van de Manager van de Code in Analytische Adobe moeten downloaden

Als u eenmaal de code van de bezoekersidentiteitsservice hebt gedownload, klikt u op + onder handelingen om een nieuw actiepunt te maken, en vervolgens

1. Selecteer &quot;Kern&quot; in de vervolgkeuzelijst Extensie.
2. Selecteer Aangepaste code in de keuzelijst Type handeling.
3. t-size:12,0 pt&quot;`>` Voeg de naam van de Actie in de tekstvakje van de Naam toe.
4. Selecteer Javascript onder Taal.
5. Schakel &quot;Globaal uitvoeren&quot; in.
6. Klik op Editor openen.
7. Voeg onderaan de volgende code toe en klik op Opslaan.



```none
var visitor = Visitor.getInstance("Experience Cloud ID", {
trackingServer: "tracking server", // same as s.trackingServer
trackingServerSecure: " tracking server " // same as s.trackingServerSecure
});
```




<b>STAP 5: Handelingen toevoegen - Code meting toepassen</b>

Voor Media Analytics is een instantie van Appmeasurement vereist. U moet het bestand downloaden van Codebeheer in de gebruikersinterface van Adobe Analytics.

Als u eenmaal de toepassingscode hebt gedownload, klikt u op + onder handelingen om een nieuw actiepunt te maken en vervolgens

1. Selecteer &quot;Kern&quot; in de vervolgkeuzelijst Extensie.
2. Selecteer Aangepaste code in de keuzelijst Type handeling.
3. Voeg de naam van de Actie in de tekstvakje van de Naam toe.
4. font-size:12.0pt&quot;`>` Selecteer Javascript onder Taal.
5. pan style=&quot;font-size:12.0pt&quot;`>` Schakel &quot;Globaal uitvoeren&quot; in.
6. style=&quot;font-size:12.0pt&quot;`>` Klik op Editor openen.
7. span style=&quot;font-size:12.0pt&quot;`>` Voeg de servicecode van de bezoeker-id toe.
8. Voeg bovenaan de code de volgende code toe en klik op Opslaan.



```none
// Initialize AppMeasurement
var s_account="report suite id"
var s=s_gi(s_account)
/<b></b><b></b> VISITOR ID SERVICE CONFIG - REQUIRES VisitorAPI.js <b></b><b></b>/
s.visitor=Visitor.getInstance("Experience Cloud ID")
```


<b>STAP 6: Handelingen toevoegen - hartslagcode</b>

Heartbone SDK downloaden van [https://github.com/Adobe-Marketing-Cloud/media-sdks/blob/master/sdks/js/2.x/libs/MediaSDK.min.js](https://github.com/Adobe-Marketing-Cloud/media-sdks/blob/master/sdks/js/2.x/libs/MediaSDK.min.js).

Als u eenmaal de hartslagcode hebt gedownload, klikt u op + onder handelingen om een nieuw actiepunt te maken en vervolgens

1. Selecteer &quot;Kern&quot; in de vervolgkeuzelijst Extensie.
2. Selecteer Aangepaste code in de keuzelijst Type handeling.
3. Voeg de naam van de Actie in de tekstvakje van de Naam toe.
4. Selecteer Javascript onder Taal.
5. Schakel &quot;Globaal uitvoeren&quot; in.
6. Klik op Editor openen.
7. Voeg de servicecode van de bezoeker-id toe.
8. Voeg onderaan de volgende code toe en klik op Opslaan.



```none
//Create a local reference to the MediaHeartbeat classes

var MediaHeartbeat = ADB.va.MediaHeartbeat;
var MediaHeartbeatConfig = ADB.va.MediaHeartbeatConfig;
var MediaHeartbeatDelegate = ADB.va.MediaHeartbeatDelegate;

//Media Heartbeat initialization

var mediaConfig = new MediaHeartbeatConfig();
mediaConfig.trackingServer = Configuration.HEARTBEAT.TRACKING_SERVER;
mediaConfig.playerName = Configuration.PLAYER.NAME;
mediaConfig.channel = Configuration.HEARTBEAT.CHANNEL;
mediaConfig.debugLogging = Configuration.HEARTBEAT.DEBUG;

mediaConfig.appVersion = Configuration.HEARTBEAT.SDK;
mediaConfig.ssl = Configuration.HEARTBEAT.SDK;
mediaConfig.ovp = Configuration.HEARTBEAT.OVP;

// Implement the MediaHeartbeatDelegate protocol.
var mediaDelegate = new MediaHeartbeatDelegate();

// Initialize

var appMeasurement = new AppMeasurement();
appMeasurement.visitor = visitor;
appMeasurement.trackingServer = Configuration.APP_MEASUREMENT.TRACKING_SERVER;
appMeasurement.account = Configuration.APP_MEASUREMENT.RSID;
appMeasurement.pageName = Configuration.APP_MEASUREMENT.PAGE_NAME;
appMeasurement.charSet = Configuration.APP_MEASUREMENT.CHAR_SET;
var contextData = {
        pageURL: document.URL,
        isUserLoggedIn: "false",
        tvStation: "Sample TV station",
        programmer: "Khurshid Alam"
        };
var mediaInfo;
var videostarted = false;
var metaDataLoaded = false;
```


<b>STAP 7: Handelingen toevoegen - YouTube IFrame API-code</b>

1. Selecteer &quot;Kern&quot; in de vervolgkeuzelijst Extensie.
2. Selecteer Aangepaste code in de keuzelijst Type handeling.
3. Voeg de naam van de Actie in de tekstvakje van de Naam toe.
4. Selecteer Javascript onder Taal.
5. Schakel &quot;Globaal uitvoeren&quot; in.
6. Klik op Editor openen.
7. Voeg de volgende code toe en klik sparen.
8. Deze code laadt de IFrame Player API-code asynchroon.



```none
var tag = document.createElement('script');
tag.src = "https://www.youtube.com/iframe_api";
var firstScriptTag = document.getElementsByTagName('script')0;
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
```


- Deze functie maakt een `<` iframe`>`  (en YouTube Player) nadat de API-code is gedownload.



```none
var player;
function onYouTubeIframeAPIReady() {
       console.log("onYouTubeIframeAPIReady called...");
       player = new YT.Player('player', {
              height: '390',
              width: '640',
              videoId: 'xWYHvIjvMnY',
              events: {
                     'onReady': onPlayerReady,
                     'onStateChange': onPlayerStateChange,
                     'onPlaybackQualityChange': onPlayerPlaybackQualityChange,
                     'onPlaybackRateChange': onPlayerPlaybackRateChange,
                     'onError': onPlayerError
              }
       });
}
```


- De API roept deze functie aan wanneer de videospeler gereed is.



```none
function onPlayerReady(event) {
       metaDataLoaded = true;
       player.playVideo();
```


- De API roept deze functie aan wanneer de status van de speler verandert. De functie geeft aan dat bij het afspelen van een video (state=1) de speler zes seconden lang moet afspelen en vervolgens moet stoppen.



```none
function onPlayerStateChange(event) {
       switch (event.data){
              case YT.PlayerState.PLAYING:  console.log("\*\*\*HB Playing");
                     if(metaDataLoaded){
                            if (Math.floor(event.target.getCurrentTime()) == 0) {
                                   console.log("\*\*\*HB Start");
                                   MediaHeartbeat = ADB.va.MediaHeartbeat;
                                   mediaInfo = MediaHeartbeat.createMediaObject(
                                          event.target.getVideoData().title,
                                          event.target.getVideoData().video_id,
                                          Math.floor(event.target.getDuration()),
                                         MediaHeartbeat.StreamType.VOD
                                   );
                                   MediaHeartbeat = new MediaHeartbeat(mediaDelegate, mediaConfig, appMeasurement);
                                   mediaDelegate.getCurrentPlaybackTime = function() {
                                   return Math.floor(event.target.getCurrentTime());
                           };
                                   MediaHeartbeat.trackSessionStart(mediaInfo, contextData);
                                   MediaHeartbeat.trackPlay();
                                   videostarted = true;
                     } else {
                           console.log("\*\*\*HB Play");
                           MediaHeartbeat.trackPlay();
                     }}
                     break;
              case YT.PlayerState.PAUSED:
                     console.log("\*\*\*HB Pause");
                     MediaHeartbeat.trackPause();
                     break;
              case YT.PlayerState.ENDED:
                     console.log("\*\*\*HB Ended");
                     MediaHeartbeat.trackComplete();
                     MediaHeartbeat.trackSessionEnd();
                     break;
              case -1:
                     console.log("\*\*\*HB Unloaded");
                     MediaHeartbeat.trackComplete();
                     MediaHeartbeat.trackSessionEnd();
                     break;
       }

}

function onPlayerPlaybackQualityChange(event) {
       console.log("onPlayerPlaybackQualityChange: event.data: "+ event.data);
}

function onPlayerPlaybackRateChange(event) {
       console.log("onPlayerPlaybackRateChange: event.data: "+ event.data);
}

function onPlayerError(event) {
       console.log("onPlayerError: event.data: "+ event.data);
}
```


<b>STAP 8: HTMLM toevoegen</b>

Voeg de volgende code in uw HTML code toe.


```none
!-- 1. The iframe (and video player) will replace this div tag. --
div id="player"/divbr
```


<b>STAP 9: Publiceren</b>

Publiceer uw eigenschap en test.
