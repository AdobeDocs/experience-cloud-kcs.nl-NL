---
title: "Video-analyse implementeren in Adobe Launch"
description: Beschrijving
solution: Customer Journey Analytics,Analytics
product: Customer Journey Analytics,Analytics
applies-to: "Customer Journey Analytics,Analytics"
keywords: "KCS Start Video Analytics Heartbone"
resolution: Resolution
internal-notes: "This implementation discussed in this article does not use Adobe Launch extension for Media Analytics."
bug: false
article-created-by: Krunal Oza
article-created-date: "9/16/2022 9:07:03 AM"
article-published-by: Krunal Oza
article-published-date: "9/16/2022 9:25:26 AM"
version-number: 3
article-number: KA-15023
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=ee0b6fe9-9e35-ed11-9db1-002248086a9c"
source-git-commit: e8f4ca2dd578944d4fe399074fab461de88ad247
workflow-type: tm+mt
source-wordcount: '1055'
ht-degree: 0%

---

# Video-analyse implementeren in Adobe Launch

## Beschrijving

<br>Omgeving<br><br>


Dit artikel bevat stappen voor het implementeren van YouTube-videotracering in Adobe Launch met gebruik van Media Heartbone SDK.


<br><br>Probleem/symptomen<br><br>
<b>Voorwaarden</b>


| <ol>   <li>U hebt een actieve implementatie van de Adobe.</li>   <li>De rapportsuite is ingeschakeld voor Media Collection.</li>   <li>De rapportsuite is toegewezen aan het juiste Analytics-aanmeldingsbedrijf in Adobe Experience Cloud.</li>   <li>U hebt publicatierechten in Adobe Launch.</li>   <li>U bent vertrouwd met Adobe Launch UI en hoe het werkt.</li>  </ol><br> |
| --- |



## Resolutie


<b>STAP 1: Nieuwe regel maken</b>

Creeer een nieuwe regel in u Adobe het bezit van de Lancering door &quot;Add knoop van de Regel&quot;onder &quot;Regels&quot;tabel te klikken. Deze regel bevat de gebeurtenisvoorwaarde voor het laden van YouTube-video en de scripts Video Analytics en YouTube iFrame API.

- Geef de regelnaam op in het tekstvak Naam.




<b>STAP 2: Gebeurtenissen en/of voorwaarden toevoegen</b>

Klik op + onder Gebeurtenis en Voorwaarden om voorwaarden te maken voor het starten van YouTube-video. In mijn voorbeeld heb ik de voorwaarde &#39;Element bestaat&#39; toegevoegd om te zoeken naar een specifieke div &#39;player&#39; waarmee de YouTube-video kan worden gestart.



<b>STAP 3: Handelingen toevoegen - configuratievariabelen</b>

Klik op + onder handelingen om een nieuw actiepunt te maken. Dit zal als één enkel punt van configuratie voor de variabelen van de opstellings VideoAnalytics dienst doen. Ik heb enkele hard-gecodeerde waarden gebruikt. U kunt echter gegevenselementen gebruiken om deze variabelen te vullen.

1. Selecteer &quot;Kern&quot; in de vervolgkeuzelijst Extensie.
2. Selecteer Aangepaste code in de keuzelijst Type handeling.
3. Voeg de naam van de Actie in de tekstvakje van de Naam toe.
4. Selecteer Javascript onder Taal.
5. Schakel &quot;Globaal uitvoeren&quot; in.
6. Klik op Editor openen.
7. Voeg de code toe en klik op Opslaan. Zorg ervoor dat u de waarden volgens uw bedrijf en rapportsuite bijwerkt.



```
(function() {    'use strict';
    // Export symbols.
    window.Configuration = {
        PLAYER: {
            NAME: 'sample player name'
            //VIDEO_ID: 'sample video id',
           //VIDEO_NAME: sample video name'
        },
        VISITOR: {
            MARKETING_CLOUD_ORG_ID: 'experience cloud ID',
            TRACKING_SERVER: 'tracking server',
            DPID: '',
            DPUUID: ''
        },
        APP_MEASUREMENT: {
            RSID: 'report suite id',
            TRACKING_SERVER: 'tracking server',
            PAGE_NAME: 'page name',
            CHAR_SET: 'UTF-8'
        },
        HEARTBEAT: {
            TRACKING_SERVER: 'heartbeat tracking server',
            PUBLISHER: 'publisher id',
            CHANNEL: 'channel',
            OVP: 'ovp name',
            SDK: 'sgk version',
       SSL: 'false',
       DEBUG: 'true'
        }
    };
})();
```


(function() { &#39;use strict&#39;;     // Symbolen exporteren.
    window.Configuration = { PLAYER: { NAAM: &#39;naam van voorbeeldspeler&#39; //VIDEO_ID: &#39;voorbeeld video-id&#39;, //VIDEO_NAME: voorbeeldvideo name&#39; }, VISITOR: { MARKETING_CLOUD_ORG_ID: &#39;Experience cloud ID&#39;, TRACKING_SERVER: &#39;tracking server&#39;, DPID: &#39;&#39;, DPUUID: &#39;&#39; }, APP_METING: {RSID: &#39;report suite id&#39;, TRACKING_SERVER: &#39;tracking server&#39;, PAGE_NAME: &#39;page name&#39;, CHAR_SET: &quot;UTF-8&quot; }, HEARTBEAT: { TRACKING_SERVER: &#39;server voor het bijhouden van hartslagen&#39;, PUBLISHER: &#39;uitgevers-id&#39;, CHANNEL: &#39;kanaal&#39;, OVP: &#39;ovp name&#39;, SDK: &#39;sgk version&#39;, SSL: &#39;false&#39;, FOUTOPSPORING: &#39;true&#39; }; })();



<b>STAP 4: Bezoekersidentiteitsservice voor handelingen toevoegen</b>

Media Analytics heeft een instantie van de Bezoeker-id-service nodig. U moet de code voor de bezoekersidentiteitsservice downloaden van Codebeheer in de gebruikersinterface van Adobe Analytics.

Als u eenmaal de code van de bezoekersidentiteitsservice hebt gedownload, klikt u op + onder handelingen om een nieuw actiepunt te maken, en vervolgens

1. Selecteer &quot;Kern&quot; in de vervolgkeuzelijst Extensie.
2. Selecteer Aangepaste code in de keuzelijst Type handeling.
3. Voeg de naam van de Actie in de tekstvakje van de Naam toe.
4. Selecteer Javascript onder Taal.
5. Schakel &quot;Globaal uitvoeren&quot; in.
6. Klik op Editor openen.
7. Voeg onderaan de volgende code toe en klik op Opslaan.
8. Voeg onderaan de volgende code toe en klik op Opslaan.


var bezoeker = Visitor.getInstance(&quot;Experience Cloud ID&quot;, { trackingServer: &quot;tracking server&quot; // dezelfde als s.trackingServer trackingServerSecure: &quot; trackingserver &quot; // dezelfde als s.trackingServerSecure });

<b>STAP 5: Handelingen toevoegen - Metingscode toepassen</b>

Voor Media Analytics is een instantie van Appmeasurement vereist. U moet het bestand downloaden van Codebeheer in de gebruikersinterface van Adobe Analytics.

Als u eenmaal de toepassingscode hebt gedownload, klikt u op + onder handelingen om een nieuw actiepunt te maken en vervolgens

1. Selecteer &quot;Kern&quot; in de vervolgkeuzelijst Extensie.
2. Selecteer Aangepaste code in de keuzelijst Type handeling.
3. Voeg de naam van de Actie in de tekstvakje van de Naam toe.
4. Selecteer Javascript onder Taal.
5. Schakel &quot;Globaal uitvoeren&quot; in.
6. Klik op Editor openen.
7. Voeg de servicecode van de bezoeker-id toe.
8. Voeg bovenaan de code de volgende code toe en klik op Opslaan.

<br><br><br>// AppMeasurement initialiseren
<br>var s_account=&quot;report suite id&quot;
<br>var s=s_gi(s_account)
<br>/\*\*\*\*\*\*\*\* BEZOEKERID SERVICE CONFIG - VEREIST BezoekerAPI.js \*\*\*\*\*\*\*\*\*\*/
<br>s.bezoeker=Visitor.getInstance(&quot;Experience Cloud ID&quot;)<br><br><br>
<b>STAP 6: Handelingen toevoegen - hartslagcode</b>

Heartbone SDK downloaden van [https://github.com/Adobe-Marketing-Cloud/media-sdks/tree/master/sdks/js/libs](https://github.com/Adobe-Marketing-Cloud/media-sdks/tree/master/sdks/js/libs).

Als u eenmaal de hartslagcode hebt gedownload, klikt u op + onder handelingen om een nieuw actiepunt te maken en vervolgens

1. Selecteer &quot;Kern&quot; in de vervolgkeuzelijst Extensie.
2. Selecteer Aangepaste code in de keuzelijst Type handeling.
3. Voeg de naam van de Actie in de tekstvakje van de Naam toe.
4. Selecteer Javascript onder Taal.
5. Schakel &quot;Globaal uitvoeren&quot; in.
6. Klik op Editor openen.
7. Voeg de servicecode van de bezoeker-id toe.
8. Voeg onderaan de volgende code toe en klik op Opslaan.


//Maak een lokale verwijzing naar de MediaHeart-klassen.

var MediaHeartbeat = ADB.va.MediaHeartbeat; var MediaHeartboneConfig = ADB.va.MediaHeartboneConfig; var MediaHeartbeatDelegate = ADB.va.MediaHeartbeatDelegate;

//Media Heartbone-initialisatie

var mediaConfig = new MediaHeartboneConfig(); mediaConfig.trackingServer = Configuration.HEARTBEAT.TRACKING_SERVER; mediaConfig.playerName = Configuration.PLAYER.NAME; mediaConfig.channel = Configuration.HEARTBEAT.CHANNEL; mediaConfig.debugLogging = Configuration.HEARTBEAT.DEBUG;

mediaConfig.appVersion = Configuration.HEARTBEAT.SDK; mediaConfig.ssl = Configuration.HEARTBEAT.SDK; mediaConfig.ovp = Configuration.HEARTBEAT.OVP;

// Implementeer het MediaHeartbeatDelegate-protocol.
var mediaDelegate = new MediaHeartbeatDelegate();

// Initialiseren

var appMeasurement = new AppMeasurement(); appMeasurement.bezoeker = bezoeker; appMeasurement.trackingServer = Configuration.APP_METING.TRACKING_SERVER; appMeturement.account = Configuration.APP_METING.RSID; appMeturement.pageName = Configuration.APP_METING.PAGE_NAME; appMeasurement.charSet = Configuration.APP_METING.CHAR_SET; var contextData = { pageURL: document.URL, isUserLoggedIn: &quot;false&quot;, tvStation: &quot;Voorbeeld-tv-station&quot;, programmeur: &quot;Khurshid Alam&quot; }; var mediaInfo; var video started = false; var metaDataLoaded = false;



<b>STAP 7: Handelingen toevoegen - YouTube IFrame API-code</b>

1. Selecteer &quot;Kern&quot; in de vervolgkeuzelijst Extensie.
2. Selecteer Aangepaste code in de keuzelijst Type handeling.
3. Voeg de naam van de Actie in de tekstvakje van de Naam toe.
4. Selecteer Javascript onder Taal.
5. Schakel &quot;Globaal uitvoeren&quot; in.
6. Klik op Editor openen.
7. Voeg de volgende code toe en klik op Opslaan.


// 2. Deze code laadt de IFrame Player API-code asynchroon.

var tag = document.createElement(&#39;script&#39;); tag.src = &quot;https://www.youtube.com/iframe_api&quot;; var firstScriptTag = document.getElementsByTagName(&#39;script&#39;)0; firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

// 3. Deze functie maakt een iframe (en YouTube-speler) // nadat de API-code is gedownload.

var player; function onYouTubeIframeAPIReady() { console.log(&quot;onYouTubeIframeAPIReady called...&quot;);        player = new YT.Player(&#39;player&#39;, { height: &quot;390&quot;, breedte: &#39;640&#39;, videoId: &#39;xWYHvIjvMnY&#39;, gebeurtenissen: {&quot;onReady&quot;: onPlayerReady, &#39;onStateChange&#39;: onPlayerStateChange, &#39;onPlaybackQualityChange&#39;: onPlayerPlaybackQualityChange, &#39;onPlaybackRateChange&#39;: onPlayerPlaybackRateChange, &#39;onError&#39;: onPlayerError }); }

// 4. De API roept deze functie aan wanneer de videospeler gereed is.

function onPlayerReady(event) { metaDataLoaded = true;        player.playVideo(); }

// 5. De API roept deze functie aan wanneer de status van de speler verandert.
// De functie geeft aan dat wanneer een video wordt afgespeeld (state=1), // de speler zes seconden lang moet worden afgespeeld en daarna moet stoppen.

function onPlayerStateChange(event) { switch (event.data){ case YT.PlayerState.PLAYING: console.log(&quot;\*\*\*HB Play&quot;);                      if(metaDataLoaded){ if (Math.floor(event.target.getCurrentTime()) == 0) { console.log(&quot;\*\*\*HB Start&quot;);                                    MediaHeartbone = ADB.va.MediaHeartbone;                                    mediaInfo = MediaHartslag.createMediaObject( event.target.getVideoData().title, event.target.getVideoData().video_id, Math.floor(event.target.getDuration()), MediaHeartbone.StreamType.VOD ); MediaHeartbone = new MediaHeartbone(mediaDelegate, mediaConfig appMeasurement);                                    mediaDelegate.getCurrentPlaybackTime = function() { return Math.floor(event.target.getCurrentTime());                            };                                    MediaHartslag.trackSessionStart(mediaInfo, contextData);                                    MediaHeartbone.trackPlay();                                    video started = true;                      } else { console.log(&quot;\*\*\*HB Play&quot;);                            MediaHeartbone.trackPlay();                      }} break;               case YT.PlayerState.PAUSED:                      console.log(&quot;\*\*\*HB Pause&quot;);                      MediaHeartbone.trackPause();                      breuk;               case YT.PlayerState.ENDED:                      console.log(&quot;\*\*\*HB beëindigd&quot;);                      MediaHeartbone.trackComplete();                      MediaHeartbone.trackSessionEnd();                      breuk;               case -1:                      console.log(&quot;\*\*\*HB verwijderd&quot;);                      MediaHeartbone.trackComplete();                      MediaHeartbone.trackSessionEnd();                      breuk;        }

}

function onPlayerPlaybackQualityChange(event) { console.log(&quot;onPlayerPlaybackQualityChange: event.data: &quot;+ event.data); }

function onPlayerPlaybackRateChange(event) { console.log(&quot;onPlayerPlaybackRateChange: event.data: &quot;+ event.data); }

function onPlayerError(event) { console.log(&quot;onPlayerError: event.data: &quot;+ event.data); }



<b>STAP 8: HTML toevoegen</b>

Voeg de volgende code in uw HTML code toe.

!-- 1. De iframe (en de videospeler) vervangen deze div-tag. — div id=&quot;player&quot;/divbr

<b>STAP 8: Publiceren</b>

Publiceer uw eigenschap en test.


