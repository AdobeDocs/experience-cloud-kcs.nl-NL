---
title: "Een TarMK-instantie in AEM klonen"
description: Beschrijving
solution: Experience Manager
product: Experience Manager
applies-to: "Experience Manager"
keywords: "KCS"
resolution: Resolution
internal-notes: "From https://helpx.adobe.com/experience-manager/kb/how-to-clone-an-AEM-TarMK-instance-AEM.html"
bug: false
article-created-by: Krunal Oza
article-created-date: "10/19/2022 12:22:38 PM"
article-published-by: Krunal Oza
article-published-date: "10/19/2022 12:26:44 PM"
version-number: 3
article-number: KA-16875
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=708341b2-a84f-ed11-bba2-00224808679b"
source-git-commit: f5733806d73b3f790b10d99330168b4c066f33c3
workflow-type: tm+mt
source-wordcount: '200'
ht-degree: 4%

---

# Een TarMK-instantie klonen in AEM

## Beschrijving

<b>Omgeving</b>
- Experience Manager



<b>Problemen/symptomen</b>
In dit artikel wordt uitgelegd hoe u een AEM-instantie die TarMK (of TarMK + FileDataStore) gebruikt voor opslag op de juiste wijze kloont.


## Resolutie


In de onderstaande stappen ziet u hoe u een AEM + TarMK + FileDataStore-instantie kopieert via synchronisatie op Linux waarbij AEM is geïnstalleerd onder /mnt/aem/auteur.

1. Kopieer de volledige AEM instantie naar een andere server terwijl deze wordt uitgevoerd met een opdracht als synchroniseren.  Zorg ervoor dat de tijdstempels behouden blijven tijdens het kopieerproces en sluit de logboekmap en datastore uit.  Bijvoorbeeld: `rsync -av --exclude 'crx-quickstart/logs' --exclude 'crx-quickstart/repository/repository/datastore' /mnt/aem/author user@dest-host:/mnt/aem/`
2. AEM stoppen
3. Initieer een ander exemplaar van de TarMK segmentstore omslag om het even welke nieuwere veranderingen te krijgen aangezien het eerste exemplaar werd gedaan: `rsync -av /mnt/aem/author/crx-quickstart/repository/segmentstore/* user@dest-host:/mnt/aem/author/crx-quickstart/repository/segmentstore/`
4. Start AEM.
5. Kopieer de datastore terwijl AEM wordt uitgevoerd. Bijvoorbeeld: `rsync -av /mnt/aem/author user@dest-host:/mnt/aem/crx-quickstart/repository/repository/datastore /mnt/aem/crx-quickstart/repository/repository/`
6. Maak de logbestanden op de doelserver opnieuw, verwijder de map crx-quickstart/repository/index en verwijder de map sling.id.file uit de map crx-quickstart/launch/felix.

   `mkdir /mnt/aem/crx-quickstart/logs`

   `rm -rf /mnt/aem/crx-quickstart/repository/index`

   `find /mnt/aem/crx-quickstart/launchpad/felix -type f -name "sling.id.file" -exec rm -f {} \; -print`
7. Start AEM op de doelserver en test de instantie.


<b>Belangrijke opmerking:</b>

U moet ervoor zorgen dat de datastore na de segmentstore omslag wordt gekopieerd en dat alle timestamps tijdens het exemplaar worden bewaard. Met Rsync kunnen tijdstempels behouden blijven met de optie -a.
