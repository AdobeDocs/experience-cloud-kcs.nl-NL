---
title: "Een TarMK-instantie in AEM klonen"
description: Beschrijving
solution: Experience Manager
product: Experience Manager
applies-to: "Experience Manager"
keywords: "KCS"
resolution: Resolution
internal-notes: "From https://helpx.adobe.com/experience-manager/kb/how-to-clone-an-AEM-TarMK-instance-AEM.html"
bug: false
article-created-by: Emily Geary
article-created-date: "3/24/2021 11:36:07 PM"
article-published-by: Emily Geary
article-published-date: "3/24/2021 11:37:50 PM"
version-number: 2
article-number: KA-16875
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=371b76b1-f98c-eb11-a812-000d3a58b9d1"
exl-id: d9c35199-775f-4f24-8d30-3828bb11e7f6
source-git-commit: a59847e2e7e37f432cb01150b9444cd9dbf585df
workflow-type: tm+mt
source-wordcount: '186'
ht-degree: 3%

---

# Een TarMK-instantie klonen in AEM

## Beschrijving

In dit artikel wordt uitgelegd hoe u een AEM instantie die TarMK (of TarMK + FileDataStore) voor de opslag gebruikt, op de juiste manier kloont.

## Resolutie

In de onderstaande stappen ziet u hoe u een AEM + TarMK + FileDataStore-instantie kunt kopiëren via de functie synchroniseren op [!DNL Linux] met AEM geïnstalleerd onder `/mnt/aem/author`.

1. Kopieer de volledige AEM instantie naar een andere server terwijl deze wordt uitgevoerd met een opdracht als synchroniseren. Zorg ervoor dat de tijdstempels behouden blijven tijdens het kopieerproces en sluit de logboekmap en datastore uit. Bijvoorbeeld:

   ```
   rsync -av --exclude 'crx-quickstart/logs' --exclude 'crx-quickstart/repository/repository/datastore' /mnt/aem/author user@dest-host:/mnt/aem/
   ```

1. AEM stoppen

1. Initieer een ander exemplaar van de TarMK segmentstore omslag om het even welke nieuwere veranderingen te krijgen aangezien het eerste exemplaar werd gedaan:

   ```
   rsync -av /mnt/aem/author/crx-quickstart/repository/segmentstore/* user@dest-host:/mnt/aem/author/crx-quickstart/repository/segmentstore/
   ```

1. Start AEM.

1. Kopieer de datastore terwijl AEM wordt uitgevoerd. Bijvoorbeeld: `rsync -av /mnt/aem/author user@dest-host:/mnt/aem/crx-quickstart/repository/repository/datastore /mnt/aem/crx-quickstart/repository/repository/`

1. Maak de logbestanden opnieuw op de doelserver en verwijder de map `crx-quickstart/repository/index` en verwijder de map sling.id.fi `crx-quickstart/launchpad/felix` map.

   ```
   mkdir /mnt/aem/crx-quickstart/logs
   rm -rf /mnt/aem/crx-quickstart/repository/index
   find /mnt/aem/crx-quickstart/launchpad/felix -type f -name "sling.id.file" -exec rm -f {} \; -print
   ```

1. Start AEM op de doelserver en test de instantie.

<b>Belangrijke opmerking:</b>

U moet ervoor zorgen dat de datastore na de segmentstore omslag wordt gekopieerd en dat alle timestamps tijdens het exemplaar worden bewaard.  Met Rsync kunnen tijdstempels behouden blijven met de optie -a.
